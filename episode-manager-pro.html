<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìù „Ç®„Éî„ÇΩ„Éº„ÉâÁÆ°ÁêÜPro | ÂÆåÂÖ®Ëá™ÂãïÂåñ„Ç∑„Çπ„ÉÜ„É†</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 1rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #0099cc, #0077aa);
            color: white;
            padding: 3rem 2rem;
            text-align: center;
        }
        
        .header h1 {
            margin: 0 0 1rem 0;
            font-size: 2.5rem;
            font-weight: 700;
        }
        
        .header p {
            margin: 0;
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .main-content {
            padding: 2rem;
        }
        
        .tabs {
            display: flex;
            background: #f8f9fa;
            border-radius: 12px;
            padding: 8px;
            margin-bottom: 2rem;
        }
        
        .tab {
            flex: 1;
            text-align: center;
            padding: 1rem;
            background: transparent;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .tab.active {
            background: white;
            color: #0099cc;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .quick-add {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            padding: 2rem;
            border-radius: 16px;
            margin-bottom: 2rem;
        }
        
        .quick-add h2 {
            margin: 0 0 1rem 0;
            font-size: 1.8rem;
        }
        
        .notion-paste {
            background: white;
            border: 2px dashed #20c997;
            border-radius: 12px;
            padding: 2rem;
            margin: 1rem 0;
            min-height: 200px;
            font-family: monospace;
            font-size: 0.9rem;
            resize: vertical;
            width: 100%;
            box-sizing: border-box;
        }
        
        .notion-paste:focus {
            outline: none;
            border-color: #0099cc;
            box-shadow: 0 0 0 3px rgba(0, 153, 204, 0.1);
        }
        
        .controls {
            display: grid;
            grid-template-columns: 1fr 1fr auto auto;
            gap: 1rem;
            align-items: end;
            margin: 1rem 0;
        }
        
        .form-group {
            margin-bottom: 0;
        }
        
        label {
            display: block;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: #333;
        }
        
        input, select {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            box-sizing: border-box;
        }
        
        .btn {
            background: #0099cc;
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }
        
        .btn:hover {
            background: #0077aa;
            transform: translateY(-1px);
        }
        
        .btn.success {
            background: #28a745;
        }
        
        .btn.success:hover {
            background: #218838;
        }
        
        .btn.danger {
            background: #dc3545;
        }
        
        .btn.danger:hover {
            background: #c82333;
        }
        
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }
        
        .stat-card {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 1.5rem;
            border-radius: 12px;
            text-align: center;
        }
        
        .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }
        
        .preview {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 12px;
            padding: 2rem;
            margin: 1rem 0;
            display: none;
        }
        
        .preview.show {
            display: block;
        }
        
        .preview h3 {
            margin-top: 0;
            color: #0099cc;
        }
        
        .episode-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 1rem;
        }
        
        .episode-card {
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 12px;
            padding: 1.5rem;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }
        
        .episode-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        
        .episode-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #0099cc, #667eea);
        }
        
        .episode-number {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }
        
        .episode-title {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            color: #333;
        }
        
        .episode-meta {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 1rem;
            display: flex;
            gap: 1rem;
        }
        
        .episode-actions {
            display: flex;
            gap: 0.5rem;
        }
        
        .btn-small {
            padding: 0.5rem 1rem;
            font-size: 0.8rem;
            border-radius: 6px;
        }
        
        .output {
            background: #1a1a1a;
            color: #00ff00;
            border-radius: 8px;
            padding: 1.5rem;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            white-space: pre-wrap;
            max-height: 400px;
            overflow-y: auto;
            margin: 1rem 0;
        }
        
        .loading {
            display: none;
            text-align: center;
            padding: 2rem;
        }
        
        .loading.show {
            display: block;
        }
        
        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #0099cc;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .success-message {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            display: none;
        }
        
        .success-message.show {
            display: block;
        }
        
        .batch-upload {
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            color: white;
            padding: 2rem;
            border-radius: 16px;
            margin: 2rem 0;
        }
        
        .drop-zone {
            border: 3px dashed rgba(255,255,255,0.3);
            border-radius: 12px;
            padding: 3rem;
            text-align: center;
            margin: 1rem 0;
            transition: all 0.3s;
        }
        
        .drop-zone.dragover {
            border-color: rgba(255,255,255,0.8);
            background: rgba(255,255,255,0.1);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üöÄ „Ç®„Éî„ÇΩ„Éº„ÉâÁÆ°ÁêÜPro</h1>
            <p>Notion„Åã„Çâ„ÉØ„É≥„ÇØ„É™„ÉÉ„ÇØ„ÅßË®ò‰∫ãÂ§âÊèõ„ÉªËá™ÂãïÊäïÁ®ø„Ç∑„Çπ„ÉÜ„É†</p>
        </div>
        
        <div class="main-content">
            <!-- „Çø„Éñ„Éä„Éì„Ç≤„Éº„Ç∑„Éß„É≥ -->
            <div class="tabs">
                <button class="tab active" onclick="switchTab(0)">üéØ „ÇØ„Ç§„ÉÉ„ÇØËøΩÂä†</button>
                <button class="tab" onclick="switchTab(1)">üìä Áµ±Ë®à„ÉªÁÆ°ÁêÜ</button>
                <button class="tab" onclick="switchTab(2)">üîÑ „Éê„ÉÉ„ÉÅÂá¶ÁêÜ</button>
                <button class="tab" onclick="switchTab(3)">‚öôÔ∏è Ë®≠ÂÆö</button>
            </div>
            
            <!-- „Çø„Éñ1: „ÇØ„Ç§„ÉÉ„ÇØËøΩÂä† -->
            <div class="tab-content active">
                <div class="quick-add">
                    <h2>‚ö° NotionË®ò‰∫ã„ÇíÂç≥Â∫ß„Å´Â§âÊèõ</h2>
                    <p>Notion„Éö„Éº„Ç∏„Åã„Çâ„Ç≥„Éî„Éº„Åó„Åü„ÉÜ„Ç≠„Çπ„Éà„Çí„Åù„ÅÆ„Åæ„ÅæË≤º„Çä‰ªò„Åë„Å¶„Åè„Å†„Åï„ÅÑ</p>
                    
                    <div class="controls">
                        <div class="form-group">
                            <label for="series">„Ç∑„É™„Éº„Ç∫:</label>
                            <select id="series">
                                <option value="europe2025">„É®„Éº„É≠„ÉÉ„Éë2025 (138-164Ë©±)</option>
                                <option value="europe2025_2">„É®„Éº„É≠„ÉÉ„Éë2025‚ë° (165-253Ë©±)</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="episodeNum">„Ç®„Éî„ÇΩ„Éº„ÉâÁï™Âè∑:</label>
                            <input type="number" id="episodeNum" min="138" max="253" placeholder="‰æã: 169">
                        </div>
                        
                        <button class="btn success" onclick="autoConvert()">ü™Ñ Ëá™ÂãïÂ§âÊèõ</button>
                        <button class="btn" onclick="previewEpisode()">üëÄ „Éó„É¨„Éì„É•„Éº</button>
                    </div>
                    
                    <textarea 
                        class="notion-paste" 
                        id="notionText" 
                        placeholder="„Åì„Åì„Å´Notion„Éö„Éº„Ç∏„ÅÆÂÜÖÂÆπ„Çí„Ç≥„Éî„Éö„Åó„Å¶„Åè„Å†„Åï„ÅÑ...

‰æã:
# „Çπ„Éà„ÉÉ„ÇØ„Éõ„É´„É†„ÅÆÁæé„Åó„ÅÑÊúù

2025Âπ¥2Êúà6Êó• üá∏üá™ „Çπ„Ç¶„Çß„Éº„Éá„É≥

„Çπ„Ç¶„Çß„Éº„Éá„É≥„ÅÆÈ¶ñÈÉΩ„Çπ„Éà„ÉÉ„ÇØ„Éõ„É´„É†„ÅßËøé„Åà„ÇãÊúù„ÅØÊ†ºÂà•„Åß„Åó„Åü„ÄÇ

## ÂåóÊ¨ß„ÅÆÈ≠ÖÂäõ
- Ê∏ÖÊΩî„ÅßÁæé„Åó„ÅÑË°ó‰∏¶„Åø
- Áí∞Â¢É„Å´ÈÖçÊÖÆ„Åó„ÅüË®≠Ë®à

ÁîªÂÉèURL„ÇÇËá™Âãï„ÅßÂá¶ÁêÜ„Åï„Çå„Åæ„ÅôÔºÅ"
                    ></textarea>
                </div>
                
                <div class="loading">
                    <div class="spinner"></div>
                    <p>üîÑ NotionË®ò‰∫ã„ÇíÂ§âÊèõ‰∏≠...</p>
                </div>
                
                <div class="success-message">
                    <h4>‚úÖ Â§âÊèõÂÆå‰∫ÜÔºÅ</h4>
                    <p id="successText"></p>
                </div>
                
                <div class="preview">
                    <h3>üìñ „Éó„É¨„Éì„É•„Éº</h3>
                    <div id="previewContent"></div>
                </div>
                
                <div class="output" id="output"></div>
            </div>
            
            <!-- „Çø„Éñ2: Áµ±Ë®à„ÉªÁÆ°ÁêÜ -->
            <div class="tab-content">
                <div class="stats">
                    <div class="stat-card">
                        <div class="stat-number" id="totalEpisodes">0</div>
                        <div class="stat-label">Á∑è„Ç®„Éî„ÇΩ„Éº„ÉâÊï∞</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="europe2025Count">0</div>
                        <div class="stat-label">„É®„Éº„É≠„ÉÉ„Éë2025Á∑®</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="europe2025_2Count">0</div>
                        <div class="stat-label">„É®„Éº„É≠„ÉÉ„Éë2025‚ë°Á∑®</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="imagesCount">0</div>
                        <div class="stat-label">Âá¶ÁêÜÊ∏à„ÅøÁîªÂÉèÊï∞</div>
                    </div>
                </div>
                
                <h2>üìö Êó¢Â≠ò„Ç®„Éî„ÇΩ„Éº„Éâ‰∏ÄË¶ß</h2>
                <div id="episodeList" class="episode-list"></div>
            </div>
            
            <!-- „Çø„Éñ3: „Éê„ÉÉ„ÉÅÂá¶ÁêÜ -->
            <div class="tab-content">
                <div class="batch-upload">
                    <h2>üîÑ ‰∏ÄÊã¨„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ</h2>
                    <p>Ë§áÊï∞„ÅÆNotionË®ò‰∫ã„Çí‰∏ÄÂ∫¶„Å´Âá¶ÁêÜ„Åß„Åç„Åæ„Åô</p>
                    
                    <div class="drop-zone" id="dropZone">
                        <h3>üìÅ „Éï„Ç°„Ç§„É´„Çí„Éâ„É≠„ÉÉ„Éó „Åæ„Åü„ÅØ „ÇØ„É™„ÉÉ„ÇØ„Åó„Å¶ÈÅ∏Êäû</h3>
                        <p>Ë§áÊï∞„ÅÆ„ÉÜ„Ç≠„Çπ„Éà„Éï„Ç°„Ç§„É´(.txt)„Çí„Åæ„Å®„ÇÅ„Å¶Âá¶ÁêÜ</p>
                        <input type="file" id="fileInput" multiple accept=".txt" style="display: none;">
                    </div>
                    
                    <button class="btn" onclick="document.getElementById('fileInput').click()">
                        üìÇ „Éï„Ç°„Ç§„É´ÈÅ∏Êäû
                    </button>
                    <button class="btn success" onclick="processBatch()">
                        üöÄ ‰∏ÄÊã¨Â§âÊèõÈñãÂßã
                    </button>
                </div>
            </div>
            
            <!-- „Çø„Éñ4: Ë®≠ÂÆö -->
            <div class="tab-content">
                <h2>‚öôÔ∏è „Ç∑„Çπ„ÉÜ„É†Ë®≠ÂÆö</h2>
                
                <div class="form-group">
                    <label>GitHubËá™Âãï„Ç≥„Éü„ÉÉ„Éà:</label>
                    <label>
                        <input type="checkbox" id="autoCommit" checked> 
                        Â§âÊèõÂæå„Å´GitHub„Å∏Ëá™Âãï„Éó„ÉÉ„Ç∑„É•
                    </label>
                </div>
                
                <div class="form-group">
                    <label>ÁîªÂÉèÊúÄÈÅ©Âåñ:</label>
                    <label>
                        <input type="checkbox" id="optimizeImages" checked> 
                        ÁîªÂÉè„ÇíËá™Âãï„ÅßWebPÂΩ¢Âºè„Å´Â§âÊèõ
                    </label>
                </div>
                
                <div class="form-group">
                    <label>ÈÄöÁü•Ë®≠ÂÆö:</label>
                    <label>
                        <input type="checkbox" id="notifications" checked> 
                        Â§âÊèõÂÆå‰∫ÜÊôÇ„Å´„Éñ„É©„Ç¶„Ç∂ÈÄöÁü•
                    </label>
                </div>
                
                <button class="btn" onclick="exportSettings()">üìã Ë®≠ÂÆö„Çí„Ç®„ÇØ„Çπ„Éù„Éº„Éà</button>
                <button class="btn danger" onclick="resetAll()">üóëÔ∏è ÂÖ®„Éá„Éº„Çø„É™„Çª„ÉÉ„Éà</button>
            </div>
        </div>
    </div>
    
    <script src="./assets/js/episodes-content.js"></script>
    <script>
        class EpisodeManagerPro {
            constructor() {
                this.currentTab = 0;
                this.processedImages = 0;
                this.init();
            }
            
            init() {
                this.updateStats();
                this.displayEpisodes();
                this.setupDragAndDrop();
                this.requestNotificationPermission();
            }
            
            // „Çø„ÉñÂàá„ÇäÊõø„Åà
            switchTab(index) {
                // „Åô„Åπ„Å¶„ÅÆ„Çø„Éñ„Å®„Ç≥„É≥„ÉÜ„É≥„ÉÑ„ÇíÈùû„Ç¢„ÇØ„ÉÜ„Ç£„Éñ„Å´
                document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
                
                // ÈÅ∏Êäû„Åï„Çå„Åü„Çø„Éñ„Å®„Ç≥„É≥„ÉÜ„É≥„ÉÑ„Çí„Ç¢„ÇØ„ÉÜ„Ç£„Éñ„Å´
                document.querySelectorAll('.tab')[index].classList.add('active');
                document.querySelectorAll('.tab-content')[index].classList.add('active');
                
                this.currentTab = index;
            }
            
            // NotionË®ò‰∫ã„ÇíËá™ÂãïÂ§âÊèõ
            async autoConvert() {
                const notionText = document.getElementById('notionText').value.trim();
                const episodeNumber = document.getElementById('episodeNum').value;
                const series = document.getElementById('series').value;
                
                if (!notionText || !episodeNumber) {
                    alert('Notion„ÉÜ„Ç≠„Çπ„Éà„Å®„Ç®„Éî„ÇΩ„Éº„ÉâÁï™Âè∑„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ');
                    return;
                }
                
                this.showLoading(true);
                this.log('üöÄ Â§âÊèõÈñãÂßã...');
                
                try {
                    // „É°„Çø„Éá„Éº„ÇøÊäΩÂá∫
                    const metadata = this.extractMetadata(notionText);
                    this.log(`üìä „É°„Çø„Éá„Éº„Çø: ${metadata.title || 'ÁÑ°È°å'}`);
                    
                    // HTMLÂ§âÊèõ
                    let html = this.convertToHTML(notionText);
                    this.log('üîÑ HTMLÂ§âÊèõÂÆå‰∫Ü');
                    
                    // ÁîªÂÉèÂá¶ÁêÜ„Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥
                    html = await this.processImages(html, episodeNumber);
                    
                    // „Ç®„Éî„ÇΩ„Éº„Éâ‰ΩúÊàê
                    const episode = {
                        title: metadata.title || `Á¨¨${episodeNumber}Ë©±`,
                        date: metadata.date || new Date().toLocaleDateString('ja-JP'),
                        location: metadata.location || this.getDefaultLocation(series, episodeNumber),
                        content: html
                    };
                    
                    // episodes-content.js„Å´ËøΩÂä†Ôºà„Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥Ôºâ
                    this.addEpisodeToContent(episode, episodeNumber, series);
                    
                    this.showLoading(false);
                    this.showSuccess(`‚úÖ „Ç®„Éî„ÇΩ„Éº„Éâ${episodeNumber}: ${episode.title} „ÅåÊ≠£Â∏∏„Å´ËøΩÂä†„Åï„Çå„Åæ„Åó„ÅüÔºÅ`);
                    
                    // ÈÄöÁü•
                    if (document.getElementById('notifications').checked) {
                        this.showNotification('„Ç®„Éî„ÇΩ„Éº„ÉâËøΩÂä†ÂÆå‰∫Ü', `Á¨¨${episodeNumber}Ë©±„ÅåÊ≠£Â∏∏„Å´ËøΩÂä†„Åï„Çå„Åæ„Åó„Åü`);
                    }
                    
                    // Áµ±Ë®àÊõ¥Êñ∞
                    this.updateStats();
                    
                    // „Éï„Ç©„Éº„É†„ÇØ„É™„Ç¢
                    document.getElementById('notionText').value = '';
                    document.getElementById('episodeNum').value = '';
                    
                } catch (error) {
                    this.showLoading(false);
                    this.log(`‚ùå „Ç®„É©„Éº: ${error.message}`);
                }
            }
            
            // „É°„Çø„Éá„Éº„ÇøÊäΩÂá∫
            extractMetadata(text) {
                const metadata = { title: '', date: '', location: '' };
                
                // „Çø„Ç§„Éà„É´ÊäΩÂá∫
                const titleMatch = text.match(/^#\s*(.+)$/m) || text.match(/^(.+)$/m);
                if (titleMatch) {
                    metadata.title = titleMatch[1].trim().replace(/^[\d]+[:Ôºö]\s*/, '');
                }
                
                // Êó•‰ªòÊäΩÂá∫
                const dateMatch = text.match(/(\d{4}Âπ¥\d{1,2}Êúà\d{1,2}Êó•)/);
                if (dateMatch) {
                    metadata.date = dateMatch[1];
                }
                
                // Â†¥ÊâÄÊäΩÂá∫
                const locationMatch = text.match(/([üá¶-üáø]{2}\s*[^\n\r]+)/);
                if (locationMatch) {
                    metadata.location = locationMatch[1].trim();
                }
                
                return metadata;
            }
            
            // HTMLÂ§âÊèõ
            convertToHTML(text) {
                return text
                    .replace(/^# (.+)$/gm, '<h2>$1</h2>')
                    .replace(/^## (.+)$/gm, '<h3>$1</h3>')
                    .replace(/^### (.+)$/gm, '<h4>$1</h4>')
                    .replace(/\*\*(.+?)\*\*/g, '<strong>$1</strong>')
                    .replace(/\*(.+?)\*/g, '<em>$1</em>')
                    .replace(/^- (.+)$/gm, '<li>$1</li>')
                    .replace(/^> (.+)$/gm, '<blockquote>$1</blockquote>')
                    .replace(/^(?!<[^>]+>)(.+)$/gm, '<p>$1</p>')
                    .replace(/<p><\/p>/g, '')
                    .replace(/(<li>.*<\/li>)+/g, '<ul>$&</ul>')
                    .replace(/<\/li><li>/g, '</li>\n<li>');
            }
            
            // ÁîªÂÉèÂá¶ÁêÜ„Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥
            async processImages(html, episodeNumber) {
                const imageRegex = /(https?:\/\/[^\s]+\.(?:jpg|jpeg|png|gif|webp))/gi;
                const images = html.match(imageRegex) || [];
                
                for (let i = 0; i < images.length; i++) {
                    const imageUrl = images[i];
                    const localPath = `assets/images/episodes/episode-${episodeNumber}-${i + 1}.jpg`;
                    
                    // Âá¶ÁêÜ„Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥
                    await new Promise(resolve => setTimeout(resolve, 200));
                    this.log(`üì∏ ÁîªÂÉèÂá¶ÁêÜ: ${imageUrl} -> ${localPath}`);
                    
                    html = html.replace(imageUrl, localPath);
                    this.processedImages++;
                }
                
                return html;
            }
            
            // „Éá„Éï„Ç©„É´„ÉàÂ†¥ÊâÄÂèñÂæó
            getDefaultLocation(series, episodeNumber) {
                if (series === 'europe2025_2') {
                    if (episodeNumber >= 165 && episodeNumber <= 167) return 'üá©üá∞ „Éá„É≥„Éû„Éº„ÇØ';
                    if (episodeNumber >= 168 && episodeNumber <= 178) return 'üá∏üá™ „Çπ„Ç¶„Çß„Éº„Éá„É≥';
                    if (episodeNumber >= 179 && episodeNumber <= 187) return 'üáµüá± „Éù„Éº„É©„É≥„Éâ';
                    if (episodeNumber >= 188 && episodeNumber <= 195) return 'üá≥üá¥ „Éé„É´„Ç¶„Çß„Éº';
                    if (episodeNumber >= 196 && episodeNumber <= 201) return 'üáÆüá™ „Ç¢„Ç§„É´„É©„É≥„Éâ';
                    if (episodeNumber >= 202 && episodeNumber <= 207) return 'üá¶üá™ „Éâ„Éê„Ç§';
                    if (episodeNumber >= 208 && episodeNumber <= 225) return 'üá´üá∑ „Éï„É©„É≥„Çπ';
                    if (episodeNumber >= 226 && episodeNumber <= 231) return 'üáØüáµüá®üá≥ Êó•Êú¨„Éª‰∏äÊµ∑';
                    if (episodeNumber >= 232 && episodeNumber <= 243) return 'üá±üáªüá±üáπüá™üá™ „Éê„É´„Éà‰∏âÂõΩ';
                    if (episodeNumber >= 244 && episodeNumber <= 253) return 'üá¨üáß „Ç§„ÇÆ„É™„Çπ';
                }
                return series === 'europe2025' ? 'üáÆüá™ „Ç¢„Ç§„É´„É©„É≥„Éâ' : 'üåç „É®„Éº„É≠„ÉÉ„Éë';
            }
            
            // „Ç®„Éî„ÇΩ„Éº„ÉâËøΩÂä†Ôºà„Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥Ôºâ
            addEpisodeToContent(episode, episodeNumber, series) {
                this.log(`üìù episodes-content.js„Å´ËøΩÂä†‰∏≠...`);
                this.log(`${episodeNumber}: ${episode.title}`);
                this.log(`üìÖ ${episode.date} | üìç ${episode.location}`);
                
                // ÂÆüÈöõ„ÅÆÂá¶ÁêÜ„Åß„ÅØ„ÄÅ„Åì„Åì„Åß„Éï„Ç°„Ç§„É´„Å´Êõ∏„ÅçËæº„Åø
                const code = `        ${episodeNumber}: {
            title: "${episodeNumber}:${episode.title}",
            date: "${episode.date}",
            location: "${episode.location}",
            content: \`${episode.content.substring(0, 100)}...\`
        },`;
                
                this.log('üìã ÁîüÊàê„Åï„Çå„Åü„Ç≥„Éº„Éâ:');
                this.log(code);
            }
            
            // „Éó„É¨„Éì„É•„ÉºË°®Á§∫
            previewEpisode() {
                const notionText = document.getElementById('notionText').value.trim();
                if (!notionText) {
                    alert('„Éó„É¨„Éì„É•„Éº„Åô„Çã„ÉÜ„Ç≠„Çπ„Éà„Åå„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ');
                    return;
                }
                
                const metadata = this.extractMetadata(notionText);
                const html = this.convertToHTML(notionText);
                
                const preview = document.querySelector('.preview');
                const content = document.getElementById('previewContent');
                
                content.innerHTML = `
                    <h4>${metadata.title || 'ÁÑ°È°å'}</h4>
                    <p><strong>Êó•‰ªò:</strong> ${metadata.date || 'Êú™Ë®≠ÂÆö'}</p>
                    <p><strong>Â†¥ÊâÄ:</strong> ${metadata.location || 'Êú™Ë®≠ÂÆö'}</p>
                    <hr>
                    <div>${html}</div>
                `;
                
                preview.classList.add('show');
            }
            
            // Áµ±Ë®àÊõ¥Êñ∞
            updateStats() {
                const europe2025Count = Object.keys(EPISODES_CONTENT.europe2025 || {}).length;
                const europe2025_2Count = Object.keys(EPISODES_CONTENT.europe2025_2 || {}).length;
                const totalCount = europe2025Count + europe2025_2Count;
                
                document.getElementById('totalEpisodes').textContent = totalCount;
                document.getElementById('europe2025Count').textContent = europe2025Count;
                document.getElementById('europe2025_2Count').textContent = europe2025_2Count;
                document.getElementById('imagesCount').textContent = this.processedImages;
            }
            
            // „Ç®„Éî„ÇΩ„Éº„Éâ‰∏ÄË¶ßË°®Á§∫
            displayEpisodes() {
                const container = document.getElementById('episodeList');
                container.innerHTML = '';
                
                ['europe2025', 'europe2025_2'].forEach(seriesKey => {
                    const episodes = EPISODES_CONTENT[seriesKey] || {};
                    const seriesName = seriesKey === 'europe2025' ? '„É®„Éº„É≠„ÉÉ„Éë2025' : '„É®„Éº„É≠„ÉÉ„Éë2025‚ë°';
                    
                    Object.entries(episodes).forEach(([episodeNum, episode]) => {
                        const card = document.createElement('div');
                        card.className = 'episode-card';
                        card.innerHTML = `
                            <div class="episode-number">${seriesName} Á¨¨${episodeNum}Ë©±</div>
                            <div class="episode-title">${episode.title}</div>
                            <div class="episode-meta">
                                <span>üìÖ ${episode.date}</span>
                                <span>üìç ${episode.location}</span>
                            </div>
                            <div class="episode-actions">
                                <button class="btn btn-small" onclick="manager.viewEpisode('${seriesKey}', ${episodeNum})">
                                    üëÄ Á¢∫Ë™ç
                                </button>
                                <button class="btn btn-small success" onclick="manager.editEpisode('${seriesKey}', ${episodeNum})">
                                    ‚úèÔ∏è Á∑®ÈõÜ
                                </button>
                            </div>
                        `;
                        container.appendChild(card);
                    });
                });
            }
            
            // „Ç®„Éî„ÇΩ„Éº„ÉâÁ¢∫Ë™ç
            viewEpisode(series, episodeNumber) {
                const countryParam = series === 'europe2025' ? 'europe2025' : 'europe2025-2';
                window.open(`episode-template.html?episode=${episodeNumber}&country=${countryParam}`, '_blank');
            }
            
            // „Ç®„Éî„ÇΩ„Éº„ÉâÁ∑®ÈõÜ
            editEpisode(series, episodeNumber) {
                this.switchTab(0);
                
                const episode = EPISODES_CONTENT[series][episodeNumber];
                document.getElementById('series').value = series;
                document.getElementById('episodeNum').value = episodeNumber;
                
                // ÈÄÜÂ§âÊèõ„Åó„Å¶Notion„ÉÜ„Ç≠„Çπ„Éà„Å£„ÅΩ„ÅèÂæ©ÂÖÉ
                const notionText = this.htmlToNotionText(episode.content, episode.title, episode.date, episode.location);
                document.getElementById('notionText').value = notionText;
            }
            
            // HTML‚ÜíNotion„ÉÜ„Ç≠„Çπ„ÉàÈÄÜÂ§âÊèõ
            htmlToNotionText(html, title, date, location) {
                return html
                    .replace(/<h2>(.*?)<\/h2>/g, '# $1')
                    .replace(/<h3>(.*?)<\/h3>/g, '## $1')
                    .replace(/<h4>(.*?)<\/h4>/g, '### $1')
                    .replace(/<strong>(.*?)<\/strong>/g, '**$1**')
                    .replace(/<em>(.*?)<\/em>/g, '*$1*')
                    .replace(/<li>(.*?)<\/li>/g, '- $1')
                    .replace(/<blockquote>(.*?)<\/blockquote>/g, '> $1')
                    .replace(/<p>(.*?)<\/p>/g, '$1')
                    .replace(/<ul>|<\/ul>/g, '')
                    .replace(/\n+/g, '\n\n');
            }
            
            // „Éâ„É©„ÉÉ„Ç∞&„Éâ„É≠„ÉÉ„ÉóË®≠ÂÆö
            setupDragAndDrop() {
                const dropZone = document.getElementById('dropZone');
                
                dropZone.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    dropZone.classList.add('dragover');
                });
                
                dropZone.addEventListener('dragleave', () => {
                    dropZone.classList.remove('dragover');
                });
                
                dropZone.addEventListener('drop', (e) => {
                    e.preventDefault();
                    dropZone.classList.remove('dragover');
                    
                    const files = Array.from(e.dataTransfer.files);
                    this.handleFiles(files);
                });
                
                dropZone.addEventListener('click', () => {
                    document.getElementById('fileInput').click();
                });
                
                document.getElementById('fileInput').addEventListener('change', (e) => {
                    this.handleFiles(Array.from(e.target.files));
                });
            }
            
            // „Éï„Ç°„Ç§„É´Âá¶ÁêÜ
            async handleFiles(files) {
                this.log(`üìÅ ${files.length}ÂÄã„ÅÆ„Éï„Ç°„Ç§„É´„ÇíÂá¶ÁêÜ‰∏≠...`);
                
                for (const file of files) {
                    if (file.type === 'text/plain') {
                        const content = await this.readFile(file);
                        this.log(`üìÑ ${file.name} „ÇíË™≠„ÅøËæº„ÅøÂÆå‰∫Ü`);
                        // „Åì„Åì„ÅßËá™ÂãïÂ§âÊèõÂá¶ÁêÜ„ÇíÂÆüË°å
                    }
                }
            }
            
            // „Éï„Ç°„Ç§„É´Ë™≠„ÅøËæº„Åø
            readFile(file) {
                return new Promise((resolve) => {
                    const reader = new FileReader();
                    reader.onload = (e) => resolve(e.target.result);
                    reader.readAsText(file);
                });
            }
            
            // „É≠„Ç∞Âá∫Âäõ
            log(message) {
                const output = document.getElementById('output');
                const timestamp = new Date().toLocaleTimeString();
                output.textContent += `[${timestamp}] ${message}\n`;
                output.scrollTop = output.scrollHeight;
            }
            
            // „É≠„Éº„Éá„Ç£„É≥„Ç∞Ë°®Á§∫
            showLoading(show) {
                const loading = document.querySelector('.loading');
                loading.classList.toggle('show', show);
            }
            
            // ÊàêÂäü„É°„ÉÉ„Çª„Éº„Ç∏Ë°®Á§∫
            showSuccess(message) {
                const success = document.querySelector('.success-message');
                document.getElementById('successText').textContent = message;
                success.classList.add('show');
                
                setTimeout(() => success.classList.remove('show'), 5000);
            }
            
            // ÈÄöÁü•Ê®©ÈôêË¶ÅÊ±Ç
            requestNotificationPermission() {
                if ('Notification' in window && Notification.permission === 'default') {
                    Notification.requestPermission();
                }
            }
            
            // ÈÄöÁü•Ë°®Á§∫
            showNotification(title, body) {
                if ('Notification' in window && Notification.permission === 'granted') {
                    new Notification(title, { body, icon: 'assets/images/profile.jpg' });
                }
            }
        }
        
        // „Ç∞„É≠„Éº„Éê„É´Èñ¢Êï∞
        function switchTab(index) {
            window.manager.switchTab(index);
        }
        
        function autoConvert() {
            window.manager.autoConvert();
        }
        
        function previewEpisode() {
            window.manager.previewEpisode();
        }
        
        function processBatch() {
            window.manager.log('üîÑ „Éê„ÉÉ„ÉÅÂá¶ÁêÜÊ©üËÉΩ„ÅØÈñãÁô∫‰∏≠„Åß„Åô...');
        }
        
        function exportSettings() {
            window.manager.log('üìã Ë®≠ÂÆö„Ç®„ÇØ„Çπ„Éù„Éº„ÉàÊ©üËÉΩ„ÅØÈñãÁô∫‰∏≠„Åß„Åô...');
        }
        
        function resetAll() {
            if (confirm('Êú¨ÂΩì„Å´ÂÖ®„Éá„Éº„Çø„Çí„É™„Çª„ÉÉ„Éà„Åó„Åæ„Åô„ÅãÔºü')) {
                window.manager.log('üóëÔ∏è „Éá„Éº„Çø„É™„Çª„ÉÉ„ÉàÊ©üËÉΩ„ÅØÈñãÁô∫‰∏≠„Åß„Åô...');
            }
        }
        
        // ÂàùÊúüÂåñ
        document.addEventListener('DOMContentLoaded', () => {
            window.manager = new EpisodeManagerPro();
        });
    </script>
</body>
</html>